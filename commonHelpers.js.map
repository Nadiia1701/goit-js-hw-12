{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nconst API_KEY = '42569915-bcd29008899db620988a57306';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst loader = document.querySelector('.loader');\n\nlet perPage = 15;\n\nexport async function fetchData(searchQuery, currentPage) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: perPage,\n  });\n\n  loader.style.display = 'block';\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n\n    if (!response.status === 200) {\n      throw new Error('Network response was not OK!');\n    }\n\n    const data = response.data;\n\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        fontSize: 'large',\n        close: false,\n        position: 'topRight',\n        messageColor: 'white',\n        timeout: 2000,\n        backgroundColor: 'red',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n\n    return data;\n\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}\n","export function renderMurcup(data) {\n  return data.hits\n    .map(\n      element => `<div class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${element.webformatURL}\" alt=\"${element.tags}\">\n      </a>\n      <div class=\"gallery-image-info\">\n          <p class=\"image-info-item\"><span class=\"image-items-text\">Likes: </span>${element.likes}</p>\n          <p class=\"image-info-item\"><span class=\"image-items-text\">Views: </span>${element.views}</p>\n          <p class=\"image-info-item\"><span class=\"image-items-text\">Comments: </span>${element.comments}</p>\n          <p class=\"image-info-item\"><span class=\"image-items-text\">Downloads: </span>${element.downloads}</p>\n      </div>\n  </div>`\n    )\n    .join('')\n  \n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchData } from \"./js/pixabay-api.js\";\nimport { renderMurcup } from \"./js/render-functions.js\";\n\nconst lightbox = new SimpleLightbox(\".gallery-link\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nconst form = document.querySelector(\"#searchForm\");\nconst container = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nlet searchQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nloadMoreBtn.style.display = \"none\";\n\nform.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nfunction onSubmit(event) {\n  event.preventDefault();\n  container.innerHTML = \"\";\n  currentPage = 1;\n  searchQuery = form.elements.searchQuery.value.trim();\n  fetchImages();\n}\n\nfunction onLoadMore() {\n  currentPage++;\n  fetchImages();\n}\n\nfunction fetchImages() {\n  fetchData(searchQuery, currentPage)\n    .then(data => {\n      totalHits = data.totalHits;\n      const murcup = renderMurcup(data);\n      container.insertAdjacentHTML('beforeend', murcup);\n      lightbox.refresh();\n      handleLoadMoreButton(data);\n    })\n    .catch((error) => console.error(\"Error fetching data:\", error));\n}\n\nfunction handleLoadMoreButton(data) {\n  if (container.children.length < totalHits) {\n    loadMoreBtn.style.display = \"block\";\n  } else {\n    const currentHits = currentPage * 15;\n    if (currentHits >= totalHits) {\n      loadMoreBtn.style.display = \"none\";\n      iziToast.info({\n        title: 'Info',\n        message: `We're sorry, but you've reached the end of search results.`,\n        backgroundColor: '#4CAF50',\n        messageColor: '#fff',\n        titleColor: '#fff',\n        progressBarColor: '#4CAF50',\n        position: 'topRight',\n      });\n    } else {\n      renderMurcup(data); \n    }\n  }\n}\n\nfunction smoothScroll() {\n  const itemHeight = container.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: 3 * itemHeight,\n    behavior: \"smooth\",\n  });\n}\n\ncontainer.addEventListener(\"scroll\", smoothScroll);"],"names":["API_KEY","BASE_URL","loader","perPage","fetchData","searchQuery","currentPage","params","response","axios","data","iziToast","error","renderMurcup","element","lightbox","SimpleLightbox","form","container","loadMoreBtn","totalHits","onSubmit","onLoadMore","event","fetchImages","murcup","handleLoadMoreButton","smoothScroll","itemHeight"],"mappings":"owBAMA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAU,GAEP,eAAeC,EAAUC,EAAaC,EAAa,CACxD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKP,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUH,CACd,CAAG,EAEDD,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMM,EAAW,MAAMC,EAAM,IAAI,GAAGR,CAAQ,IAAIM,CAAM,EAAE,EAExD,GAAI,CAACC,EAAS,SAAW,IACvB,MAAM,IAAI,MAAM,8BAA8B,EAGhD,MAAME,EAAOF,EAAS,KAEtB,OAAAN,EAAO,MAAM,QAAU,OAEnBQ,EAAK,KAAK,SAAW,GACvBC,EAAS,MAAM,CACb,SAAU,QACV,MAAO,GACP,SAAU,WACV,aAAc,QACd,QAAS,IACT,gBAAiB,MACjB,QACE,0EACV,CAAO,EAGID,CAER,OAAQE,EAAO,CACd,cAAQ,MAAM,uBAAwBA,CAAK,EACrCA,CACP,CACH,CCvDO,SAASC,EAAaH,EAAM,CACjC,OAAOA,EAAK,KACT,IACCI,GAAW;AAAA,sCACqBA,EAAQ,aAAa;AAAA,4CACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,oFAGFA,EAAQ,KAAK;AAAA,oFACbA,EAAQ,KAAK;AAAA,uFACVA,EAAQ,QAAQ;AAAA,wFACfA,EAAQ,SAAS;AAAA;AAAA,SAGpG,EACA,KAAK,EAAE,CAEZ,CCRA,MAAMC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAId,EAAc,GACdC,EAAc,EACdc,EAAY,EAEhBD,EAAY,MAAM,QAAU,OAE5BF,EAAK,iBAAiB,SAAUI,CAAQ,EACxCF,EAAY,iBAAiB,QAASG,CAAU,EAEhD,SAASD,EAASE,EAAO,CACvBA,EAAM,eAAc,EACpBL,EAAU,UAAY,GACtBZ,EAAc,EACdD,EAAcY,EAAK,SAAS,YAAY,MAAM,KAAI,EAClDO,GACF,CAEA,SAASF,GAAa,CACpBhB,IACAkB,GACF,CAEA,SAASA,GAAc,CACrBpB,EAAUC,EAAaC,CAAW,EAC/B,KAAKI,GAAQ,CACZU,EAAYV,EAAK,UACjB,MAAMe,EAASZ,EAAaH,CAAI,EAChCQ,EAAU,mBAAmB,YAAaO,CAAM,EAChDV,EAAS,QAAO,EAChBW,EAAqBhB,CAAI,CAC/B,CAAK,EACA,MAAOE,GAAU,QAAQ,MAAM,uBAAwBA,CAAK,CAAC,CAClE,CAEA,SAASc,EAAqBhB,EAAM,CAC9BQ,EAAU,SAAS,OAASE,EAC9BD,EAAY,MAAM,QAAU,QAERb,EAAc,IACfc,GACjBD,EAAY,MAAM,QAAU,OAC5BR,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,gBAAiB,UACjB,aAAc,OACd,WAAY,OACZ,iBAAkB,UAClB,SAAU,UAClB,CAAO,GAEDE,EAAaH,CAAI,CAGvB,CAEA,SAASiB,GAAe,CACtB,MAAMC,EAAaV,EAAU,kBAAkB,sBAAqB,EAAG,OACvE,OAAO,SAAS,CACd,IAAK,EAAIU,EACT,SAAU,QACd,CAAG,CACH,CAEAV,EAAU,iBAAiB,SAAUS,CAAY"}